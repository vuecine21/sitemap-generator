<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### Table of Contents

-   [Background](#background)
    -   [backgroundEvents](#backgroundevents)
        -   [onMessageHandler](#onmessagehandler)
        -   [onInstalledEvent](#oninstalledevent)
        -   [launchGenerator](#launchgenerator)
    -   [sitemapGenerator](#sitemapgenerator)
        -   [start](#start)
        -   [terminate](#terminate)
        -   [status](#status)
        -   [noindex](#noindex)
        -   [onComplete](#oncomplete)
        -   [receiveUrlFromContent](#receiveurlfromcontent)
        -   [onTabLoadListener](#ontabloadlistener)
        -   [onTabErrorHandler](#ontaberrorhandler)
-   [Content Scripts](#content-scripts)
    -   [crawler](#crawler)
-   [onHeadersReceivedHandler](#onheadersreceivedhandler)
-   [addListeners](#addlisteners)
-   [removeListeners](#removelisteners)
-   [listAdd](#listadd)
-   [navigateToNext](#navigatetonext)
-   [appendCodeFragment](#appendcodefragment)

## Background

The main logic of this extension happens in the background pages of the extension.


### backgroundEvents

Listens to relevant events in the browser and responds accordingly

#### onMessageHandler

Listen to generator termination request

**Parameters**

-   `request`  
-   `sender`  
-   `sendResponse`  

#### onInstalledEvent

This handler runs when user first installs the extension.
It should launch a demo or some other way to explain how the extension works.

**Parameters**

-   `details` **any** chrome provided parameter; indicates if this is new install or update

#### launchGenerator

When some launch event occurs, this function will

-   determine the url to crawl (i.e. optional parameter or active tab)
-   make sure the extension has permission to access that domain
-   kick off a crawling sessions

**Parameters**

-   `tab`  

### sitemapGenerator

This module manages the sitemap generation process

The process works as follows:

1.  on start the generator will create a rendering window and
    open a tab for the start url; then wait for http headers response.
2.  If received headers indicate success, generator will load a crawling script in the tab
    that will scan the page looking for a-tag urls.
3.  The content script will send a message back to the generator with a list of urls found on the page.
    the generator will add all new urls to the queue and close the tab
4.  After the initial url has been processed new tabs will open on a set interval to account for possible
    errors and non-response until all urls in the processing queue have been checked
5.  After everything has been cheked the generator will close the window and provide
    the results to the end user

**Parameters**

-   `config` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** configuration options
    -   `config.url` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** the website/app path we want to crawl -- all sitemap entries will be such that they include this base url

#### start

launch the generator

#### terminate

terminate the generator before it exits naturally

#### status

get stats about processing status

#### noindex

when crawling a page the page is set specifically to not be index we must remove it

**Parameters**

-   `url`  

#### onComplete

execute everytime when processing is done, independed of why processing ended

#### receiveUrlFromContent

listen to messages sent from content script back to the generator instance

**Parameters**

-   `request`  
-   `sender`  

#### onTabLoadListener

Listen to incoming webrequest headers

**Parameters**

-   `details`  

#### onTabErrorHandler

if tab errors, cloe it and load next one

**Parameters**

-   `details`  

## Content Scripts

While sitemap generation is ongoing this extension will load content scripts
in the tabs that are being crawled. The purpose of these scripts is to wait for
the page to load then look for anchor tags on the page and send them to the background page.

The background page controls all of hte following aspects: 1) opening tabs,
2) initiating the client side crawling by loading the content script and 3) closing
the tab once the crawling has completed


### crawler

this module gets loaded in a tab and it looks for links on the page

## onHeadersReceivedHandler

listen to headers to determine type and cancel and
close tab immediately if the detected content type is not on the
list of target types

**Parameters**

-   `details`  

## addListeners

add listeners to track response headers and to receive messages
from the opened tabs

## removeListeners

when processing is done remove all event listeners

## listAdd

move url to a specific processing queue

**Parameters**

-   `url`  
-   `list`  

## navigateToNext

take first queued url and create new tab for that url

## appendCodeFragment

Append fragment of js code into document head

**Parameters**

-   `jsCodeFragment` **[String](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** the code you want to execute in the document context
